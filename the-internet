# Playwright — тренировка локаторов и практики E2E  
**Сайт:** https://the-internet.herokuapp.com/

Цель набора — прокачать:
- устойчивые локаторы (role/label/text/regex/scoped/relative/shadow DOM)
- ожидания и синхронизацию (без `waitForTimeout`)
- типовые E2E-задачи (auth, alerts, frames, downloads/uploads, multi-tab, network)

## Базовая настройка
Рекомендуется задать `baseURL` в `playwright.config.ts`:

    import { defineConfig } from '@playwright/test';

    export default defineConfig({
      use: {
        baseURL: 'https://the-internet.herokuapp.com',
      },
    });

---

## 1. Add/Remove Elements — scoped + уникальность
**Страница:** `/add_remove_elements/`  
**Задание:** нажать `Add Element`, затем удалить ровно один созданный элемент.  
**Ограничения:**
- нельзя использовать позиционные XPath
- перед кликом убедиться, что локатор кнопки удаления находит **ровно один** элемент

---

## 2. Checkboxes — состояния
**Страница:** `/checkboxes`  
**Задание:** сделать так, чтобы первый checkbox был `checked`, второй — `unchecked`.  
**Ограничения:**
- нельзя использовать `nth-child`, `nth()`, индексы

---

## 3. Dropdown — выбор по видимому имени
**Страница:** `/dropdown`  
**Задание:** выбрать `Option 2`.  
**Ограничения:**
- нельзя выбирать по `value="2"` (или любому value)

---

## 4. Form Authentication — поля через label/placeholder
**Страница:** `/login`  
**Задание:** залогиниться и проверить успешный вход.  
**Ограничения:**
- нельзя использовать `id`

---

## 5. Form Authentication — негативный + контейнер сообщения
**Страница:** `/login`  
**Задание:** ввести неверные данные, найти флэш-сообщение и проверить текст (частично/regex).  
**Ограничения:**
- нельзя искать “по всему body”
- нельзя использовать точное совпадение всей строки (используй частичное/regex)

---

## 6. Dynamic Loading — ожидание без sleep
**Страница:** `/dynamic_loading` (Example 1 и/или Example 2)  
**Задание:** нажать `Start`, дождаться `Hello World!` и проверить видимость.  
**Ограничения:**
- нельзя `waitForTimeout`

---

## 7. Dynamic Controls — исчезновение/появление
**Страница:** `/dynamic_controls`  
**Задание:** удалить checkbox, дождаться, затем вернуть обратно.  
**Ограничения:**
- ожидать по состоянию элемента (detached/visible), не по таймеру

---

## 8. Dynamic Controls — enable/disable input
**Страница:** `/dynamic_controls`  
**Задание:** включить input, ввести текст, выключить input, убедиться что ввод невозможен.  
**Ограничения:**
- проверки через `toBeEnabled` / `toBeDisabled`

---

## 9. JavaScript Alerts — обработка dialog
**Страница:** `/javascript_alerts`  
**Задание:**
1) нажать JS Alert и принять  
2) нажать JS Confirm и отменить  
3) нажать JS Prompt, ввести текст и принять  
**Ограничения:**
- обрабатывать через `page.once('dialog', ...)` или `page.on('dialog', ...)`

---

## 10. Context Menu — правый клик + alert
**Страница:** `/context_menu`  
**Задание:** сделать `right click` по зоне, принять alert, проверить результат.  
**Ограничения:**
- не использовать координаты клика

---

## 11. Hovers — hover раскрывает контент
**Страница:** `/hovers`  
**Задание:** навести на аватар, дождаться подписи и кликнуть `View profile`.  
**Ограничения:**
- локатор ссылки ограничить конкретной “карточкой” (scoped)

---

## 12. Disappearing Elements — устойчивость к флаппи UI
**Страница:** `/disappearing_elements`  
**Задание:** найти ссылку, которая иногда отсутствует (например, Gallery), и написать проверку, которая:
- не падает “жёстко”, а корректно репортит/пропускает шаг  
**Ограничения:**
- без бесконечных ручных ретраев

---

## 13. Challenging DOM — без хрупких селекторов
**Страница:** `/challenging_dom`  
**Задание:** кликнуть кнопку (например, `Edit`) в строке, где в одном из столбцов заданный текст.  
**Ограничения:**
- нельзя полагаться на фиксированные индексы колонок

---

## 14. Sortable Data Tables — строка + колонка по заголовку
**Страница:** `/tables`  
**Задание:** получить значение Email для строки с фамилией `Smith` (или другой).  
**Ограничения:**
- колонку искать по заголовку, не по позиции

---

## 15. Floating Menu — проверка “приклеенности”
**Страница:** `/floating_menu`  
**Задание:** проскроллить вниз и проверить, что меню всё ещё видимо/кликабельно.  
**Ограничения:**
- не использовать `waitForTimeout`

---

## 16. Infinite Scroll — догрузка контента
**Страница:** `/infinite_scroll`  
**Задание:** проскроллить до появления N-го блока текста.  
**Ограничения:**
- ждать по появлению нового контента, не по таймеру

---

## 17. Drag and Drop — действие и проверка результата
**Страница:** `/drag_and_drop`  
**Задание:** перетащить `A` на `B` и подтвердить, что они поменялись местами.  
**Ограничения:**
- без “магических” JS-хакингов, если получается стандартными средствами

---

## 18. Horizontal Slider — управление клавиатурой
**Страница:** `/horizontal_slider`  
**Задание:** выставить значение (например, 3.5) с клавиатуры.  
**Ограничения:**
- не двигать ползунок координатами мыши

---

## 19. Multiple Windows — новая вкладка
**Страница:** `/windows`  
**Задание:** открыть новую страницу, переключиться на неё, проверить заголовок/текст, закрыть.  
**Ограничения:**
- использовать ожидание события новой страницы (page/context waitForEvent)

---

## 20. Frames — работа через frameLocator
**Страница:** `/frames` → iFrame  
**Задание:** очистить редактор и ввести свой текст.  
**Ограничения:**
- не использовать ручной обход `page.frames()`, только `frameLocator`

---

## 21. Nested Frames — вложенные фреймы
**Страница:** `/nested_frames`  
**Задание:** получить текст из `MIDDLE` (или другого блока).  
**Ограничения:**
- без позиционных XPath

---

## 22. Shadow DOM — “как рекомендовано”
**Страница:** `/shadowdom`  
**Задание:** найти элемент внутри shadow root и проверить текст/структуру.  
**Ограничения:**
- без “хакинга” через `evaluate` как основного подхода

---

## 23. File Upload — загрузка файла
**Страница:** `/upload`  
**Задание:** загрузить файл и проверить, что имя файла показано после upload.  
**Ограничения:**
- не использовать `id`

---

## 24. File Download — скачивание и сохранение
**Страница:** `/download`  
**Задание:** кликнуть файл, перехватить `download`, сохранить и проверить, что файл появился.  
**Ограничения:**
- не “угадывать” имя файла, использовать `download.suggestedFilename()`

---

## 25. Basic Auth — httpCredentials
**Страница:** `/basic_auth` (логин/пароль: admin/admin)  
**Задание:** открыть страницу с базовой авторизацией и проверить текст успешного входа.  
**Ограничения:**
- не вставлять креды прямо в URL строкой

---

## 26. Status Codes — проверка HTTP-ответа
**Страница:** `/status_codes`  
**Задание:** перейти на 404 и проверить именно HTTP статус ответа.  
**Ограничения:**
- не проверять только текст “404” на странице

---

## 27. Geolocation/Permissions — разрешения браузера
**Страница:** `/geolocation`  
**Задание:** подменить геолокацию и разрешения, проверить отображаемые координаты.  
**Ограничения:**
- не кликать системные попапы вручную

---

## 28. Network — перехват/стаб
**Страница:** любая с запросами (например, `/dynamic_content`)  
**Задание:** заабортить загрузку картинок/шрифтов и убедиться, что тест стабильнее/быстрее.  
**Ограничения:**
- нельзя менять приложение, только `page.route`

---

## 29. Стабильность набора — trace/video/screenshot
**Страница:** любая  
**Задание:** включить трейсы и собирать артефакты на падении.  
**Ограничения:**
- не использовать `console.log` как основной инструмент диагностики

---

## 30. Архитектура тестов — фикстуры и “feature-first”
**Страница:** любая  
**Задание:** сделать мини-структуру “по фичам”:
- `features/<feature>/*.spec.ts`
- `features/<feature>/page.ts` (если повторяются действия)
- `shared/fixtures/test.ts` (например, общий `open(path)` и общие настройки)
**Ограничения:**
- не делать один огромный `helpers.ts`
